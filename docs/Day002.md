# Day 2: Opening a Win32 Window

- Defined a window class `WNDCLASS` and registered it through `RegisterClass`.
  - The window class requires a callback function which the OS uses to notify us of events occuring on the window.
  - This callback is called the _window procedure_.
  - For any event occuring on the window, the _window procedure_ is called with the event.
    - For now, the following events are handled by printing a debug string through `OutputDebugString`:
      - `WM_SIZE`: triggers on window resizes.
      - `WM_DESTROY`: triggers when the window is being destroyed.
      - `WM_CLOSE`: triggers when window should be closed. (e.g.: click the X button)
      - `WM_ACTIVATEAPP`: triggers when window is focused.
      - `WM_PAINT`: triggers when a portion of the window should be repainted.
        - The current implementation just switches between black and white background for the portions of the screen that should be repainted.
        - `BeginPaint` is called with the window handle which provides a `PAINTSTRUCT` that has information about the portion of the screen that should be repainted.
        - `BeginPaint` also returns a device context (`HDC`) which is an opaque handle that must be passed in any function that changes the window state.
        - `PatBlt`: fills the rect from `PAINTSTRUCT` with the current device context's _brush_.
        - `EndPaint` is called after painting is complete.
    - __IMPORTANT__: any unhandled event **must** be passed to `DefWindowProc` which provides default behaviour for unhandled events.
    - Messages printed through `OutputDebugString` are only visible in a debugger's output.

- Created the window using the class through `CreateWindowEx`.
  - Use `CW_USEDEFAULT` as default values for `X`, `Y`, `nWidth`, `nHeight`.

- Create a message loop to pull events from the event queue and then dispatch them to the callback defined in the window class.
  - Message are pulled using `GetMessage` which blocks execution until an event is received through the queue.
    - Notice that `GetMessage` expects a windows handle argument `hWnd` which is set to `0` (`NULL`).
    - When `hWnd` is `NULL`, `GetMessage` will retrieve messages for any window created by the current thread.
    - A single window is used by the project, so this works out.
  - Once a message is pulled, the message must go through `TranslateMessage` which transforms the message to a format our callback can consume.
  - The message is then dispatched to the _window procedure_ defined in the window class.
